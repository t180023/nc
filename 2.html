<!-- % Time-stamp: <2015-04-17 10:39:47 junta> -->
<meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp"/>
<html>
<head>
<title></title>
<link rel="stylesheet" type="text/css" href="kadai.css">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
    }
  });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>
<meta http-equiv="X-UA-Compatible" CONTENT="IE=EmulateIE7" />
</head>
<body>

<h1>数値計算法及び実習<br>第2回課題</h1>

以下7つの課題が<font color="red">すべてできたら、</font>教員またはTAを呼ぶこと。

<ol>
 <li> 以下の C のプログラムを実行し、char 型の変数が表すことのできる最大の整数を求めよ。また、その最大の整数から char 型の変数が何ビットの変数であると考えられるか、理由も含めて、教員またはTAに説明せよ。

<pre class="program">
#include &lt;stdio.h&gt;

int main ()
{
  char i = 0;

  while (1) {
    i++;
    printf("%d\n", i);
    if ( i < 0 ) break;
  }

}
</pre>
 <li> 以下の C のプログラムを実行し、short 型の変数が表すことのできる最大の整数を求めよ。また、その最大の整数から short 型の変数が何ビットの変数であると考えられるか、理由も含めて、教員またはTAに説明せよ。

<pre class="program">
#include &lt;stdio.h&gt;

int main ()
{
  short i = 0;

  while (1) {
    i++;
    printf("%d\n", i);
    if ( i < 0 ) break;
  }

}
</pre>
 <li> 以下の C のプログラムは、a + b を計算するために作ったものであるが、a と b の値によっては間違った答が出力される。どのような a と b を入力すると間違った答が出力されるのか、いろいろ試してみよ。また、a を学籍番号の下3桁の数字とするとき、a + b が 0 と出力されるような、<font color=red>正の</font> b の値を求め、教員またはTAに示せ。

<p>例) 学籍番号 T120097 の場合：a = 97 とする。</p>

<pre class="program">
#include &lt;stdio.h&gt;

int main ()
{
  short a, b, c;

  printf("a の値を入力してください：");
  scanf("%hd",&a);
  printf("b の値を入力してください：");
  scanf("%hd",&b);
  c = a + b;
  printf("a + b は %d です。\n", c);
}
</pre>
<hr>
<p>プログラムの補足説明</p>
<ul>
 <li> <p><font face=courier>%hd</font> は <font face=courier>scanf</font> を使って <font face=courier>short</font> 型変数に値を入力するときに用いられる型指定である。</p>
</ul>
<hr>
 <li> 以下の C のプログラムを実行せよ。このプログラムに適当な変更を加えることによって、int 型で表される最大の整数を探し出しなさい。教員やTAに最大の整数を答えるだけではなくて、どのようにして探し出したのかの説明もすること。
<pre class="program">
#include &lt;stdio.h&gt;

int main ()
{
  int i = 1;

  while (1) {
    i = i*2;
    printf("%d\n", i);
    if ( i < 0 ) break;
  }

}
</pre>
<li> 以下の C のプログラムを実行せよ。このプログラムに適当な変更を加えることによって、long long 型で表される最大の整数を探し出しなさい。教員やTAに最大の整数を答えるだけではなくて、どのようにして探し出したのかの説明もすること。
<pre class="program">
#include &lt;stdio.h&gt;

int main ()
{
  long long i = 1;

  while (1) {
    i = i*2;
    printf("%lld\n", i);
    if ( i < 0 ) break;
  }

}
</pre>
<hr>
<p>プログラムの補足説明</p>
<ul>
 <li> <p><font face=courier>%lld</font> は <font face=courier>printf</font> によって <font face=courier>long long</font> 型変数の値を出力するときに用いられる型指定である。</p>
</ul>
<hr>
<li> 以下は $n! = n(n-1)(n-2)\cdots 2\cdot 1$ を計算するプログラムである。しかしながら、ある値以降は間違った答が出力される。どこまでが正しい値であるか答えよ。またその理由も答えよ。

<pre class="program">
#include &lt;stdio.h&gt;

int fac (int n)
{
  return (n == 0) ? 1 : n*fac(n-1);
}

int main ()
{
  int i;
  for (i = 1; i < 22; i++) {
    printf("%2d! = %d\n", i, fac(i));
  }
}
</pre>
<hr>
<p>プログラムの補足説明</p>
<ul>
 <li> <p><font face=courier>(n == 0) ? 1 : n*fac(n-1)</font> は、<font face=courier>if (n == 0) 1 else n*fac(n-1)</font> と同じ意味である。</p>
 <li> <p>$n!$ を計算する関数 <font face=courier>fac</font> は、<font face=courier>fac(n)</font>の値を <font face=courier>fac(n-1)</font>の値を用いて定義している。このように関数を定義することを、再帰的定義という。数列を、初項と漸化式で定義するのと同じようなものである。(一般項を用いるのでなく、一項一項順番に計算していく。)</p>
</ul>
<hr>
<li> アイドルグループAKB48の仕掛け人である秋元康はあることを考えていた。「チームKの16人が毎日同じ並び方で登場するとファンが飽きてしまうだろう。よし、毎日違う並び方で登場させ、すべての並び方をやりつくしたら、チームKを解散させることにしよう。」並び方とは16人が横1列に並ぶことであるとするとき、AKB48 チームKは何日間で解散することになるかを求めよ。ただし、この問題を解くのに、上のプログラムを変更して使っても構わない。
<li> <p>発展問題 <font color=red>(余裕のある人だけやること)</font></p>

2項係数 $_nC_k$は$\displaystyle _nC_k = \frac{n!}{k!(n-k)!}$と表すことができる。この式をもとに以下のプログラムを作成してみた。
<pre class="program">
#include &lt;stdio.h&gt;

int fac (int n)
{
  return (n == 0) ? 1 : n*fac(n-1);
}

int binomial (int n, int k)
{ 
  return fac(n)/(fac(k)*fac(n-k));

}
int main ()
{
  int i;

  for (i = 0; i <= 12; i++) {
    printf("12C%d = %d\n",i,binomial(12,i));
  }

  printf("\n");

  for (i = 0; i <= 13; i++) {
    printf("13C%d = %d\n",i,binomial(13,i));
  }

}
</pre>
このプログラムを実行したところ、以下のような結果が得られた。
<pre class=program>
bash-3.2$ ./a.out
12C0 = 1
12C1 = 12
12C2 = 66
12C3 = 220
12C4 = 495
12C5 = 792
12C6 = 924
12C7 = 792
12C8 = 495
12C9 = 220
12C10 = 66
12C11 = 12
12C12 = 1

13C0 = 1
13C1 = 4
13C2 = 24
13C3 = 88
13C4 = 221
13C5 = 399
13C6 = 532
13C7 = 532
13C8 = 399
13C9 = 221
13C10 = 88
13C11 = 24
13C12 = 4
13C13 = 1
</pre>
$_{12}C_k$に対しては正しい結果が得られているが、$_{13}C_k$に対しては明らかに間違った結果が得られている。正しい結果が得られるようにプログラムを変更せよ。

<p>また、さらに大きな数字に対して正しい結果が得られるようにプログラムを変更せよ。(ヒント：$_nC_k$と$_{nー1}C_{kー1}$との間の関係式を用いて binomial (int n, int k) を再帰的に定義する。) 例えば$_{30}C_k$を計算してみよ。正しく計算されれば以下の結果が得られるはずである。</p>
<pre class=program>
bash-3.2$ ./a.out
30C0 = 1
30C1 = 30
30C2 = 435
30C3 = 4060
30C4 = 27405
30C5 = 142506
30C6 = 593775
30C7 = 2035800
30C8 = 5852925
30C9 = 14307150
30C10 = 30045015
30C11 = 54627300
30C12 = 86493225
30C13 = 119759850
30C14 = 145422675
30C15 = 155117520
30C16 = 145422675
30C17 = 119759850
30C18 = 86493225
30C19 = 54627300
30C20 = 30045015
30C21 = 14307150
30C22 = 5852925
30C23 = 2035800
30C24 = 593775
30C25 = 142506
30C26 = 27405
30C27 = 4060
30C28 = 435
30C29 = 30
30C30 = 1
</pre>
<font color=red>注意!</font> 2項係数の関係式 $_nC_k = _{n-1}C_k + _{n-1}C_{k-1}$を用いて、binomial (int n, int k) を再帰的に定義すると非常に計算時間のかかるプログラムになるので、違う関係式を使うこと。

<p><font color=red>以下のプログラムは非常に計算時間がかかる。別の方法で工夫すること。</font></p>

<pre class=program>
#include &lt;stdio.h&gt;

int binomial (int n, int k)
{ 
  return (k == 0 || k == n) ? 1 : binomial(n - 1 , k) + binomial(n - 1, k - 1);
}

int main ()
{
  int i;

  for (i = 0; i <= 30; i++) {
    printf("30C%d = %d\n", i, binomial(30,i));
  }

}
</ol>
</body> </html>
